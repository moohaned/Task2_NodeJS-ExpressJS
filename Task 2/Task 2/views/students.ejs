<%- include('partials/header') %>

<h1>All Students</h1>

<div class="search-bar">
  <form action="/students" method="GET">
    <input type="text" name="search" placeholder="Search by name..." value="<%= locals.searchQuery || '' %>" />
    <button type="submit">Search</button>
  </form>
</div>

<% if (students.length > 0) { %>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Student ID</th>
      <th>Department</th>
      <th>Age</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% students.forEach(student => { %>
    <tr>
      <td><%= student.name %></td>
      <td><%= student.studentId %></td>
      <td><%= student.department %></td>
      <td><%= student.age %></td>
      <td class="actions">
        <a href="/students/edit/<%= student._id %>" class="btn btn-edit">Edit</a>

        <form action="/students/delete/<%= student._id %>" method="POST" style="display: inline">
          <button
            type="submit"
            class="btn btn-delete"
            onclick="return confirm('Are you sure you want to delete <%= student.name %>?')">
            Delete
          </button>
        </form>
      </td>
    </tr>
    <% }) %>
  </tbody>
</table>
<% } else { %>
<p>No students found.</p>
<% } %> <%- include('partials/footer') %>
